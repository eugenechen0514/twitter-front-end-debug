(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-beb9f318"],{"69c5":function(t,e,s){"use strict";s("e287")},be6c:function(t,e,s){"use strict";var r=s("dfd8"),a=function(){return localStorage.getItem("token")};e["a"]={signIn:function(t){var e=t.account,s=t.password;return r["b"].post("/api/admin/signin",{account:e,password:s})},getTweets:function(){return r["b"].get("/api/tweets",{headers:{Authorization:"Bearer ".concat(a())}})},deleteTweet:function(t){var e=t.id;return r["b"].delete("/api/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(a())}})},getUsers:function(){return r["b"].get("/api/admin/users",{headers:{Authorization:"Bearer ".concat(a())}})}}},d946:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"SignIn"},[r("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[r("img",{staticClass:"logo",attrs:{src:s("a136"),height:"40px",width:"40px",alt:""}}),r("h1",{staticClass:"title"},[t._v("後台登入")]),r("div",{staticClass:"labelInputGroup"},[r("label",{staticClass:"formLabel",attrs:{for:"account"}},[t._v("帳號")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"formInput",class:{error:!t.isFirstTry&&!t.account||t.account.length>50},attrs:{type:"text",name:"account",id:"account",placeholder:"請輸入帳號",required:""},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}}),0===t.account.length||t.account.length>50?r("div",{staticClass:"errorMessage"},[0===t.account.length?r("p",{staticClass:"errorText"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),t.account.length>50?r("p",{staticClass:"errorText"},[t._v("字數超出上限!")]):t._e(),t.account.length>50?r("p",{staticClass:"wordsCount"},[t._v(" "+t._s(t.account.length)+"/50 ")]):t._e()]):t._e()]),r("div",{staticClass:"labelInputGroup"},[r("label",{staticClass:"formLabel",attrs:{for:"password"}},[t._v("密碼")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"formInput",class:{error:!t.isFirstTry&&!t.password||t.password.length>50},attrs:{type:"password",name:"password",id:"password",placeholder:"請輸入密碼",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),r("button",{staticClass:"signInBtn",attrs:{disabled:t.isProcessing,type:"submit"}},[t._v(" 登入 ")]),r("div",{staticClass:"linkGroup"},[r(t.isProcessing?"span":"router-link",{tag:"router-link",staticClass:"link",attrs:{to:"/signin"}},[t._v("前台登入")])],1)])])},a=[],n=s("1da1"),o=(s("96cf"),s("d9e2"),s("be6c")),i=s("dfd8"),c={data:function(){return{account:"",password:"",isFirstTry:!0,errorMessage:"",isProcessing:!1}},methods:{handleSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.isProcessing=!0,!(!t.account|!t.password)){e.next=6;break}return t.isProcessing=!1,i["a"].fire({icon:"warning",title:"請輸入帳號密碼"}),e.abrupt("return");case 6:if(!(t.account.length>50)){e.next=10;break}return t.isProcessing=!1,i["a"].fire({icon:"warning",title:"帳號超出字數上限"}),e.abrupt("return");case 10:return e.next=12,o["a"].signIn({account:t.account,password:t.password});case 12:if(s=e.sent,r=s.data,"success"===r.status){e.next=16;break}throw new Error(r.message);case 16:localStorage.setItem("token",r.token),t.$store.commit("setCurrentUser",r.token),t.$store.commit("setToken"),i["a"].fire({icon:"success",title:"成功登入，跳轉至後台首頁"}),t.$router.push({name:"admin-tweets"}),e.next=31;break;case 23:e.prev=23,e.t0=e["catch"](0),"Error: Account or Password Error!"===e.t0.response.data.message?t.errorMessage="帳號或密碼錯誤":"Error: User didn't exists!"===e.t0.response.data.message?t.errorMessage="帳號不存在!":"account is not exist"===e.t0.response.data.message&&(t.errorMessage="此帳號沒有權限"),t.isProcessing=!1,t.isFirstTry=!1,t.account="",t.password="",i["a"].fire({icon:"error",title:"無法登入"});case 31:case"end":return e.stop()}}),e,null,[[0,23]])})))()}}},u=c,l=(s("69c5"),s("2877")),d=Object(l["a"])(u,r,a,!1,null,"31ac578f",null);e["default"]=d.exports},e287:function(t,e,s){}}]);
//# sourceMappingURL=chunk-beb9f318.9239b850.js.map